!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/js/",n(n.s=39)}([function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){(function(t){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||Function("return this")()}).call(this,n(41))},function(e,t,n){"use strict";n(40),n(56),n(59),n(37),n(64),n(65),Object.defineProperty(t,"__esModule",{value:!0}),t.getRootUrl=t.generateFilePath=t.imagePath=t.generateUrl=t.generateOcsUrl=t.generateRemoteUrl=t.linkTo=void 0;t.linkTo=function(e,t){return r(e,"",t)};t.generateRemoteUrl=function(e){return window.location.protocol+"//"+window.location.host+function(e){return o()+"/remote.php/"+e}(e)};t.generateOcsUrl=function(e,t){return t=2!==t?1:2,window.location.protocol+"//"+window.location.host+o()+"/ocs/v"+t+".php/"+e+"/"};t.generateUrl=function(e,t,n){var r=Object.assign({escape:!0,noRewrite:!1},n||{}),i=function(e,t){return t=t||{},e.replace(/{([^{}]*)}/g,(function(e,n){var o=t[n];return r.escape?"string"==typeof o||"number"==typeof o?encodeURIComponent(o.toString()):encodeURIComponent(e):"string"==typeof o||"number"==typeof o?o.toString():e}))};return"/"!==e.charAt(0)&&(e="/"+e),!0!==OC.config.modRewriteWorking||r.noRewrite?o()+"/index.php"+i(e,t||{}):o()+i(e,t||{})};t.imagePath=function(e,t){return-1===t.indexOf(".")?r(e,"img",t+".svg"):r(e,"img",t)};var r=function(e,t,n){var r=-1!==OC.coreApps.indexOf(e),i=o();return"php"!==n.substring(n.length-3)||r?"php"===n.substring(n.length-3)||r?(i+="settings"!==e&&"core"!==e&&"search"!==e||"ajax"!==t?"/":"/index.php/",r||(i+="apps/"),""!==e&&(i+=e+="/"),t&&(i+=t+"/"),i+=n):(i=OC.appswebroots[e],t&&(i+="/"+t+"/"),"/"!==i.substring(i.length-1)&&(i+="/"),i+=n):(i+="/index.php/apps/"+e,"index.php"!==n&&(i+="/",t&&(i+=encodeURI(t+"/")),i+=n)),i};t.generateFilePath=r;var o=function(){return OC.webroot};t.getRootUrl=o},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(0);e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(e,t,n){var r=n(4),o=n(24),i=n(20);e.exports=r?function(e,t,n){return o.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(8);e.exports=function(e){if(!r(e))throw TypeError(String(e)+" is not an object");return e}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){var r=n(1),o=n(5),i=n(3),c=n(14),s=n(25),a=n(43),u=a.get,l=a.enforce,f=String(String).split("String");(e.exports=function(e,t,n,s){var a=!!s&&!!s.unsafe,u=!!s&&!!s.enumerable,d=!!s&&!!s.noTargetGet;"function"==typeof n&&("string"!=typeof t||i(n,"name")||o(n,"name",t),l(n).source=f.join("string"==typeof t?t:"")),e!==r?(a?!d&&e[t]&&(u=!0):delete e[t],u?e[t]=n:o(e,t,n)):u?e[t]=n:c(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&u(this).source||s(this)}))},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){var r=n(1),o=n(18).f,i=n(5),c=n(9),s=n(14),a=n(47),u=n(53);e.exports=function(e,t){var n,l,f,d,p,g=e.target,v=e.global,h=e.stat;if(n=v?r:h?r[g]||s(g,{}):(r[g]||{}).prototype)for(l in t){if(d=t[l],f=e.noTargetGet?(p=o(n,l))&&p.value:n[l],!u(v?l:g+(h?".":"#")+l,e.forced)&&void 0!==f){if(typeof d==typeof f)continue;a(d,f)}(e.sham||f&&f.sham)&&i(d,"sham",!0),c(n,l,d,e)}}},function(e,t,n){var r=n(21),o=n(7);e.exports=function(e){return r(o(e))}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(1),o=n(5);e.exports=function(e,t){try{o(r,e,t)}catch(n){r[e]=t}return t}},function(e,t,n){var r={};r[n(16)("toStringTag")]="z",e.exports="[object z]"===String(r)},function(e,t,n){var r=n(1),o=n(27),i=n(3),c=n(28),s=n(36),a=n(60),u=o("wks"),l=r.Symbol,f=a?l:l&&l.withoutSetter||c;e.exports=function(e){return i(u,e)||(s&&i(l,e)?u[e]=l[e]:u[e]=f("Symbol."+e)),u[e]}},function(e,t,n){"use strict";var r,o,i=n(38),c=n(63),s=RegExp.prototype.exec,a=String.prototype.replace,u=s,l=(r=/a/,o=/b*/g,s.call(r,"a"),s.call(o,"a"),0!==r.lastIndex||0!==o.lastIndex),f=c.UNSUPPORTED_Y||c.BROKEN_CARET,d=void 0!==/()??/.exec("")[1];(l||d||f)&&(u=function(e){var t,n,r,o,c=this,u=f&&c.sticky,p=i.call(c),g=c.source,v=0,h=e;return u&&(-1===(p=p.replace("y","")).indexOf("g")&&(p+="g"),h=String(e).slice(c.lastIndex),c.lastIndex>0&&(!c.multiline||c.multiline&&"\n"!==e[c.lastIndex-1])&&(g="(?: "+g+")",h=" "+h,v++),n=new RegExp("^(?:"+g+")",p)),d&&(n=new RegExp("^"+g+"$(?!\\s)",p)),l&&(t=c.lastIndex),r=s.call(u?n:c,h),u?r?(r.input=r.input.slice(v),r[0]=r[0].slice(v),r.index=c.lastIndex,c.lastIndex+=r[0].length):c.lastIndex=0:l&&r&&(c.lastIndex=c.global?r.index+r[0].length:t),d&&r&&r.length>1&&a.call(r[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)})),r}),e.exports=u},function(e,t,n){var r=n(4),o=n(19),i=n(20),c=n(12),s=n(22),a=n(3),u=n(23),l=Object.getOwnPropertyDescriptor;t.f=r?l:function(e,t){if(e=c(e),t=s(t,!0),u)try{return l(e,t)}catch(e){}if(a(e,t))return i(!o.f.call(e,t),e[t])}},function(e,t,n){"use strict";var r={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,i=o&&!r.call({1:2},1);t.f=i?function(e){var t=o(this,e);return!!t&&t.enumerable}:r},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r=n(0),o=n(13),i="".split;e.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==o(e)?i.call(e,""):Object(e)}:Object},function(e,t,n){var r=n(8);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var r=n(4),o=n(0),i=n(42);e.exports=!r&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(4),o=n(23),i=n(6),c=n(22),s=Object.defineProperty;t.f=r?s:function(e,t,n){if(i(e),t=c(t,!0),i(n),o)try{return s(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(26),o=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(e){return o.call(e)}),e.exports=r.inspectSource},function(e,t,n){var r=n(1),o=n(14),i=r["__core-js_shared__"]||o("__core-js_shared__",{});e.exports=i},function(e,t,n){var r=n(46),o=n(26);(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.6.5",mode:r?"pure":"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++n+r).toString(36)}},function(e,t){e.exports={}},function(e,t,n){var r=n(3),o=n(12),i=n(31).indexOf,c=n(29);e.exports=function(e,t){var n,s=o(e),a=0,u=[];for(n in s)!r(c,n)&&r(s,n)&&u.push(n);for(;t.length>a;)r(s,n=t[a++])&&(~i(u,n)||u.push(n));return u}},function(e,t,n){var r=n(12),o=n(32),i=n(52),c=function(e){return function(t,n,c){var s,a=r(t),u=o(a.length),l=i(c,u);if(e&&n!=n){for(;u>l;)if((s=a[l++])!=s)return!0}else for(;u>l;l++)if((e||l in a)&&a[l]===n)return e||l||0;return!e&&-1}};e.exports={includes:c(!0),indexOf:c(!1)}},function(e,t,n){var r=n(10),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(7);e.exports=function(e){return Object(r(e))}},function(e,t,n){var r=n(0);e.exports=!!Object.getOwnPropertySymbols&&!r((function(){return!String(Symbol())}))},function(e,t,n){"use strict";var r=n(11),o=n(17);r({target:"RegExp",proto:!0,forced:/./.exec!==o},{exec:o})},function(e,t,n){"use strict";var r=n(6);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,n,r){"use strict";r.r(n);var o,i,c,s,a,u,l,f,d,p,g,v,h,m,y,S,b,x,C=r(2);OCA.Books||(OCA.Books={}),OCA.Books.Core=(o=[],i={},c=void 0,s=void 0,a=void 0,{init:function(){this.initLibrary(),this.initControls()},initControls:function(){OCA.Books.UI.Style.init(),document.querySelector("#settings-item-scan").addEventListener("click",(function(){OCA.Books.Backend.scan(document.querySelector("#path-settings").value,(function(e){console.log(e)}))})),document.querySelector("#settings-item-reset").addEventListener("click",(function(){OCA.Books.Backend.reset((function(e){console.log(e)}))})),document.querySelector("#reader-prev").addEventListener("click",(function(){OCA.Books.Core.prevPage()})),document.querySelector("#reader-next").addEventListener("click",(function(){OCA.Books.Core.nextPage()})),document.querySelector("#reader-close").addEventListener("click",(function(){OCA.Books.Core.close()})),document.querySelector("#font-settings").addEventListener("change",(function(e){OCA.Books.UI.Style.setFontSize(e.target.value),c&&c.themes.default(OCA.Books.UI.Style.get())})),document.querySelector("#reader-progress-handle").addEventListener("mousedown",(function(){OCA.Books.UI.activateSlider()}));let e=document.querySelectorAll("th.sort");for(let t,n=0;t=e[n];n++)t.addEventListener("click",(function(e){OCA.Books.UI.sortShelf(e.target.dataset.sort)}))},initLibrary:function(){OCA.Books.Backend.getConfig((function(e){document.querySelector("#path-settings").value=e.library})),OCA.Books.Backend.getBooks((function(e){e.success&&(o=e.data,OCA.Books.UI.buildShelf(o))}))},open:function(e,t){this.close(),OCA.Books.Backend.getLocation(e,(function(n){if(n.success){OCA.Books.UI.openReader(),OCA.Books.UI.showLoadingScreen();let r=ePub(n.data,{replacements:"blobUrl",openAs:"epub"});r.loaded.navigation.then(OCA.Books.UI.buildTOC),r.ready.then((function(){r.locations.generate(1e3).then((function(){OCA.Books.UI.hideLoadingScreen();let n=[];r.spine.each((function(e){let t=e.cfiFromElement(e.document);n.push(r.locations.percentageFromCfi(t))})),OCA.Books.UI.buildMarkers(n),(c=r.renderTo(t,{width:"100%",height:"100%"})).id=e,c.themes.default(OCA.Books.UI.Style.get()),c.display(function(e){let t=o.find(t=>t.id==e);if(t&&t.progress)return t.progress}(e)),c.on("relocated",(function(){clearTimeout(s),s=setTimeout((function(){let e=c.location.start.cfi,t=c.book.locations.percentageFromCfi(e);OCA.Books.UI.refreshProgress(t,i.href)}),250),clearTimeout(a),a=setTimeout((function(){let e=c.location.start.cfi;if(c.book.locations.percentageFromCfi(e)>0){let t=o.find(e=>e.id==c.id);OCA.Books.Backend.saveProgress(c.id,e,(function(n){n.success&&(t.progress=e,t.status=t.status||2,OCA.Books.UI.refreshStatus(c.id,t.status))}))}}),1e3)})),c.on("rendered",(function(e){i=e}))}))}))}}))},close:function(){c&&(c.destroy(),c=void 0,i={}),clearTimeout(a),clearTimeout(s),OCA.Books.UI.closeReader(),OCA.Books.UI.refreshProgress(0)},nextPage:function(){c&&c.next()},prevPage:function(){c&&c.prev()},nextSection:function(){c&&i&&c.display((i.next()||{}).href)},prevSection:function(){c&&i&&c.display((i.prev()||{}).href)},toSection:function(e){c&&c.display(e)},toPercent:function(e){if(c){let t=c.book.locations.cfiFromPercentage(e);c.display(t)}}}),OCA.Books.UI=(l="title",f=!0,d=void 0,p=function(e,t){let n=t.querySelector(".more");e.length>1?(n.style.display="inline-block",n.textContent="+"+(e.length-1)):n.style.display="none"},g=function(e,t){l=e,t&&document.querySelector(`#app-content th.${l} > span:not(.hidden)`)&&(f=!f);let n=document.querySelectorAll("#app-content th.sort");for(let e,t=0;e=n[t];t++)e.classList.contains(l)?e.firstElementChild.classList.remove("hidden"):e.firstElementChild.classList.add("hidden"),f?(e.firstElementChild.classList.remove("icon-triangle-s"),e.firstElementChild.classList.add("icon-triangle-n")):(e.firstElementChild.classList.remove("icon-triangle-n"),e.firstElementChild.classList.add("icon-triangle-s"));let r=document.documentElement.dataset.locale||"en",o=document.querySelector("#app-content tbody"),i=Array.from(o.querySelectorAll("tr"));i.sort((function(e,t){return v(e,t,r)})),i.forEach(e=>{o.appendChild(e)})},v=function(e,t,n){let r=e.querySelector("."+l).dataset.fileAs,o=t.querySelector("."+l).dataset.fileAs,i=r.localeCompare(o,n,{numeric:!0});return f||(i*=-1),i},h=function(e){let t=document.createDocumentFragment(),n=document.createElement("li");n.innerHTML=document.querySelector("#template-toc-item").innerHTML,e.forEach((function(e){let r=n.cloneNode(!0);r.lastElementChild.textContent=e.label,r.lastElementChild.href=e.href,r.addEventListener("click",y),e.subitems.length>0&&r.appendChild(h(e.subitems)),t.appendChild(r)}));let r=document.createElement("ul");return r.appendChild(t),r},m=function(e){let t=e.target.closest("tr").dataset.id;OCA.Books.Core.open(t,"reader")},y=function(e){e.preventDefault(),OCA.Books.Core.toSection(e.target.getAttribute("href"))},S=function(e){clearTimeout(d);let t=document.querySelector("#reader-progress-bar").getBoundingClientRect().width,n=Math.min(Math.max(e.pageX-44,0),t);document.querySelector("#reader-progress-handle").style.left=n-7+"px",document.querySelector("#reader-progress-overlay").style.width=n+"px",d=setTimeout((function(){OCA.Books.Core.toPercent(n/t)}),250)},b=function(){let e=document.querySelector("#reader-progress-handle");e.removeEventListener("mousemove",S),e.removeEventListener("mouseup",b),e.removeEventListener("mouseleave",b),document.querySelector("#reader-progress-bar").classList.remove("active")},x=function(e){"ArrowLeft"==e.code||37==e.keyCode?OCA.Books.Core.prevPage():"ArrowRight"==e.code||39==e.keyCode?OCA.Books.Core.nextPage():"ArrowUp"==e.code||38==e.keyCode?OCA.Books.Core.prevSection():"ArrowDown"==e.code||40==e.keyCode?OCA.Books.Core.nextSection():"Escape"!=e.code&&27!=e.keyCode||OCA.Books.Core.close()},{stylesheet:"/apps/books/css/book.css",buildShelf:function(e){let n=document.createDocumentFragment(),r=document.createElement("tr");r.innerHTML=document.querySelector("#template-shelf-item").innerHTML;for(let o,i=0;o=e[i];i++){let e=r.cloneNode(!0),i=e.querySelectorAll(".field");if(e.dataset.id=o.id,e.className="app-shelf-item",0!=o.status&&(i[0].querySelector("svg.status-"+o.status).style.display="block"),o.hasCover){let e=`url("${Object(C.generateUrl)("apps/books/api/0.1/cover")}/${o.id}")`;i[0].firstElementChild.style.backgroundImage=e}else i[0].querySelector(".placeholder").textContent=o.titles[0].fileAs.substring(0,2);if(i[1].querySelector(".title-1").textContent=o.titles[0].name,i[1].dataset.fileAs=o.titles[0].fileAs,i[1].addEventListener("click",m),o.series){let e=o.series[0];i[1].dataset.fileAs=`${e.fileAs}${e.pos}`,i[1].querySelector(".title-2").textContent=`${e.name} ${e.pos}`}o.authors&&(i[0].firstElementChild.style.backgroundColor=o.authors[0].color,i[2].dataset.fileAs=o.authors[0].fileAs,i[2].querySelector(".author-1").textContent=o.authors[0].name,p(o.authors,i[2])),o.genres&&(i[3].dataset.fileAs=o.genres[0],i[3].querySelector(".genre-1").textContent=o.genres[0],p(o.genres,i[3]));let c=t("books",o.languages[0]);i[4].dataset.fileAs=c,i[4].querySelector(".lang-1").textContent=c,p(o.languages,i[4]),n.appendChild(e)}let o=document.querySelector("#app-shelf-body");o.textContent="",o.appendChild(n),g(l)},sortShelf:function(e){g(e,!0)},buildTOC:function(e){let t=document.querySelector("#app-navigation-toc");t.textContent="",t.appendChild(h(e))},buildMarkers:function(e){let t=document.createDocumentFragment();e.forEach((function(e){let n=document.createElement("div");n.className="marker",n.style.left=100*e+"%",t.appendChild(n)}));let n=document.querySelector("#reader-progress-markers");n.textContent="",n.appendChild(t)},openReader:function(){document.querySelector("#app").classList.add("reader"),window.addEventListener("keyup",x)},closeReader:function(){document.querySelector("#app").classList.remove("reader"),window.removeEventListener("keyup",x),this.hideLoadingScreen()},showLoadingScreen:function(){document.querySelector("#spinner").style.display="block"},hideLoadingScreen:function(){document.querySelector("#spinner").style.display="none"},activateSlider:function(){let e=document.querySelector("#reader-progress-handle");e.addEventListener("mousemove",S),e.addEventListener("mouseup",b),e.addEventListener("mouseleave",b),document.querySelector("#reader-progress-bar").classList.add("active")},refreshProgress:function(e,t){if(!document.querySelector("#reader-progress-bar").classList.contains("active")){e*=100;let t=document.querySelector("#reader-progress-handle"),n=document.querySelector("#reader-progress-overlay");t.style.left=`calc(${e}% - 6px)`,n.style.width=e+"%"}let n=document.querySelectorAll("#app-navigation-toc li");for(let e,r=0;e=n[r];r++)e.firstElementChild.getAttribute("href")==t?e.classList.add("active"):e.classList.remove("active")},refreshStatus:function(e,t){let n=document.querySelectorAll(`#app-content tr[data-id='${e}'] .cover svg`);for(let e,r=0;e=n[r];r++)e.style.display=e.classList.contains("status-"+t)?"block":"none"},Style:(u={html:{"font-size":"initial"},body:{"font-size":"inherit","text-align":"justify"},p:{"max-width":"32em"}},{setFontSize:function(e){u.html["font-size"]=e,window.localStorage.setItem("font-size",e)},get:function(){return u},init:function(){u.html["font-size"]=window.localStorage.getItem("font-size"),document.querySelector("#font-settings").value=u.html["font-size"]}})}),OCA.Books.Backend={get:function(e,t){let n=new XMLHttpRequest;n.addEventListener("load",t),n.open("GET",e),n.setRequestHeader("requesttoken",oc_requesttoken),n.send()},post:function(e,t,n){let r=new XMLHttpRequest;r.addEventListener("load",n),r.open("POST",e),r.setRequestHeader("requesttoken",oc_requesttoken),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.send(t)},getConfig:function(e){this.get(Object(C.generateUrl)("apps/books/api/0.1/config"),(function(){e(JSON.parse(this.response))}))},getBooks:function(e){this.get(Object(C.generateUrl)("apps/books/api/0.1/books"),(function(){e(JSON.parse(this.response))}))},getLocation:function(e,t){this.get(Object(C.generateUrl)("apps/books/api/0.1/loc/"+e),(function(){t(JSON.parse(this.response))}))},saveProgress:function(e,t,n){let r=`id=${e}&progress=${t}`;this.post(Object(C.generateUrl)("apps/books/api/0.1/progress"),r,(function(){n(JSON.parse(this.response))}))},scan:function(e,t){let n="dir="+e;this.post(Object(C.generateUrl)("apps/books/api/0.1/scan"),n,(function(){t(JSON.parse(this.response))}))},reset:function(e){this.post(Object(C.generateUrl)("apps/books/api/0.1/reset"),"",(function(){e(JSON.parse(this.response))}))}},document.addEventListener("DOMContentLoaded",(function(){OCA.Books.Core.init()}))},function(e,t,n){"use strict";var r=n(11),o=n(31).indexOf,i=n(54),c=n(55),s=[].indexOf,a=!!s&&1/[1].indexOf(1,-0)<0,u=i("indexOf"),l=c("indexOf",{ACCESSORS:!0,1:0});r({target:"Array",proto:!0,forced:a||!u||!l},{indexOf:function(e){return a?s.apply(this,arguments)||0:o(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r=n(1),o=n(8),i=r.document,c=o(i)&&o(i.createElement);e.exports=function(e){return c?i.createElement(e):{}}},function(e,t,n){var r,o,i,c=n(44),s=n(1),a=n(8),u=n(5),l=n(3),f=n(45),d=n(29),p=s.WeakMap;if(c){var g=new p,v=g.get,h=g.has,m=g.set;r=function(e,t){return m.call(g,e,t),t},o=function(e){return v.call(g,e)||{}},i=function(e){return h.call(g,e)}}else{var y=f("state");d[y]=!0,r=function(e,t){return u(e,y,t),t},o=function(e){return l(e,y)?e[y]:{}},i=function(e){return l(e,y)}}e.exports={set:r,get:o,has:i,enforce:function(e){return i(e)?o(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!a(t)||(n=o(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}}},function(e,t,n){var r=n(1),o=n(25),i=r.WeakMap;e.exports="function"==typeof i&&/native code/.test(o(i))},function(e,t,n){var r=n(27),o=n(28),i=r("keys");e.exports=function(e){return i[e]||(i[e]=o(e))}},function(e,t){e.exports=!1},function(e,t,n){var r=n(3),o=n(48),i=n(18),c=n(24);e.exports=function(e,t){for(var n=o(t),s=c.f,a=i.f,u=0;u<n.length;u++){var l=n[u];r(e,l)||s(e,l,a(t,l))}}},function(e,t,n){var r=n(49),o=n(51),i=n(34),c=n(6);e.exports=r("Reflect","ownKeys")||function(e){var t=o.f(c(e)),n=i.f;return n?t.concat(n(e)):t}},function(e,t,n){var r=n(50),o=n(1),i=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?i(r[e])||i(o[e]):r[e]&&r[e][t]||o[e]&&o[e][t]}},function(e,t,n){var r=n(1);e.exports=r},function(e,t,n){var r=n(30),o=n(33).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},function(e,t,n){var r=n(10),o=Math.max,i=Math.min;e.exports=function(e,t){var n=r(e);return n<0?o(n+t,0):i(n,t)}},function(e,t,n){var r=n(0),o=/#|\.prototype\./,i=function(e,t){var n=s[c(e)];return n==u||n!=a&&("function"==typeof t?r(t):!!t)},c=i.normalize=function(e){return String(e).replace(o,".").toLowerCase()},s=i.data={},a=i.NATIVE="N",u=i.POLYFILL="P";e.exports=i},function(e,t,n){"use strict";var r=n(0);e.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){throw 1},1)}))}},function(e,t,n){var r=n(4),o=n(0),i=n(3),c=Object.defineProperty,s={},a=function(e){throw e};e.exports=function(e,t){if(i(s,e))return s[e];t||(t={});var n=[][e],u=!!i(t,"ACCESSORS")&&t.ACCESSORS,l=i(t,0)?t[0]:a,f=i(t,1)?t[1]:void 0;return s[e]=!!n&&!o((function(){if(u&&!r)return!0;var e={length:-1};u?c(e,1,{enumerable:!0,get:a}):e[1]=1,n.call(e,l,f)}))}},function(e,t,n){var r=n(11),o=n(57);r({target:"Object",stat:!0,forced:Object.assign!==o},{assign:o})},function(e,t,n){"use strict";var r=n(4),o=n(0),i=n(58),c=n(34),s=n(19),a=n(35),u=n(21),l=Object.assign,f=Object.defineProperty;e.exports=!l||o((function(){if(r&&1!==l({b:1},l(f({},"a",{enumerable:!0,get:function(){f(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol();return e[n]=7,"abcdefghijklmnopqrst".split("").forEach((function(e){t[e]=e})),7!=l({},e)[n]||"abcdefghijklmnopqrst"!=i(l({},t)).join("")}))?function(e,t){for(var n=a(e),o=arguments.length,l=1,f=c.f,d=s.f;o>l;)for(var p,g=u(arguments[l++]),v=f?i(g).concat(f(g)):i(g),h=v.length,m=0;h>m;)p=v[m++],r&&!d.call(g,p)||(n[p]=g[p]);return n}:l},function(e,t,n){var r=n(30),o=n(33);e.exports=Object.keys||function(e){return r(e,o)}},function(e,t,n){var r=n(15),o=n(9),i=n(61);r||o(Object.prototype,"toString",i,{unsafe:!0})},function(e,t,n){var r=n(36);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(e,t,n){"use strict";var r=n(15),o=n(62);e.exports=r?{}.toString:function(){return"[object "+o(this)+"]"}},function(e,t,n){var r=n(15),o=n(13),i=n(16)("toStringTag"),c="Arguments"==o(function(){return arguments}());e.exports=r?o:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),i))?n:c?o(t):"Object"==(r=o(t))&&"function"==typeof t.callee?"Arguments":r}},function(e,t,n){"use strict";var r=n(0);function o(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=r((function(){var e=o("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=r((function(){var e=o("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},function(e,t,n){"use strict";var r=n(9),o=n(6),i=n(0),c=n(38),s=RegExp.prototype,a=s.toString,u=i((function(){return"/a/b"!=a.call({source:"a",flags:"b"})})),l="toString"!=a.name;(u||l)&&r(RegExp.prototype,"toString",(function(){var e=o(this),t=String(e.source),n=e.flags;return"/"+t+"/"+String(void 0===n&&e instanceof RegExp&&!("flags"in s)?c.call(e):n)}),{unsafe:!0})},function(e,t,n){"use strict";var r=n(66),o=n(6),i=n(35),c=n(32),s=n(10),a=n(7),u=n(67),l=n(69),f=Math.max,d=Math.min,p=Math.floor,g=/\$([$&'`]|\d\d?|<[^>]*>)/g,v=/\$([$&'`]|\d\d?)/g;r("replace",2,(function(e,t,n,r){var h=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,m=r.REPLACE_KEEPS_$0,y=h?"$":"$0";return[function(n,r){var o=a(this),i=null==n?void 0:n[e];return void 0!==i?i.call(n,o,r):t.call(String(o),n,r)},function(e,r){if(!h&&m||"string"==typeof r&&-1===r.indexOf(y)){var i=n(t,e,this,r);if(i.done)return i.value}var a=o(e),p=String(this),g="function"==typeof r;g||(r=String(r));var v=a.global;if(v){var b=a.unicode;a.lastIndex=0}for(var x=[];;){var C=l(a,p);if(null===C)break;if(x.push(C),!v)break;""===String(C[0])&&(a.lastIndex=u(p,c(a.lastIndex),b))}for(var O,k="",E=0,A=0;A<x.length;A++){C=x[A];for(var w=String(C[0]),L=f(d(s(C.index),p.length),0),q=[],j=1;j<C.length;j++)q.push(void 0===(O=C[j])?O:String(O));var P=C.groups;if(g){var B=[w].concat(q,L,p);void 0!==P&&B.push(P);var R=String(r.apply(void 0,B))}else R=S(w,p,L,q,P,r);L>=E&&(k+=p.slice(E,L)+R,E=L+w.length)}return k+p.slice(E)}];function S(e,n,r,o,c,s){var a=r+e.length,u=o.length,l=v;return void 0!==c&&(c=i(c),l=g),t.call(s,l,(function(t,i){var s;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return n.slice(0,r);case"'":return n.slice(a);case"<":s=c[i.slice(1,-1)];break;default:var l=+i;if(0===l)return t;if(l>u){var f=p(l/10);return 0===f?t:f<=u?void 0===o[f-1]?i.charAt(1):o[f-1]+i.charAt(1):t}s=o[l-1]}return void 0===s?"":s}))}}))},function(e,t,n){"use strict";n(37);var r=n(9),o=n(0),i=n(16),c=n(17),s=n(5),a=i("species"),u=!o((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),l="$0"==="a".replace(/./,"$0"),f=i("replace"),d=!!/./[f]&&""===/./[f]("a","$0"),p=!o((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));e.exports=function(e,t,n,f){var g=i(e),v=!o((function(){var t={};return t[g]=function(){return 7},7!=""[e](t)})),h=v&&!o((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[a]=function(){return n},n.flags="",n[g]=/./[g]),n.exec=function(){return t=!0,null},n[g](""),!t}));if(!v||!h||"replace"===e&&(!u||!l||d)||"split"===e&&!p){var m=/./[g],y=n(g,""[e],(function(e,t,n,r,o){return t.exec===c?v&&!o?{done:!0,value:m.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),{REPLACE_KEEPS_$0:l,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:d}),S=y[0],b=y[1];r(String.prototype,e,S),r(RegExp.prototype,g,2==t?function(e,t){return b.call(e,this,t)}:function(e){return b.call(e,this)})}f&&s(RegExp.prototype[g],"sham",!0)}},function(e,t,n){"use strict";var r=n(68).charAt;e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},function(e,t,n){var r=n(10),o=n(7),i=function(e){return function(t,n){var i,c,s=String(o(t)),a=r(n),u=s.length;return a<0||a>=u?e?"":void 0:(i=s.charCodeAt(a))<55296||i>56319||a+1===u||(c=s.charCodeAt(a+1))<56320||c>57343?e?s.charAt(a):i:e?s.slice(a,a+2):c-56320+(i-55296<<10)+65536}};e.exports={codeAt:i(!1),charAt:i(!0)}},function(e,t,n){var r=n(13),o=n(17);e.exports=function(e,t){var n=e.exec;if("function"==typeof n){var i=n.call(e,t);if("object"!=typeof i)throw TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==r(e))throw TypeError("RegExp#exec called on incompatible receiver");return o.call(e,t)}}]);